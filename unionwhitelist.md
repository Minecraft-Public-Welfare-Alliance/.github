# 联合通行证策划方案
*插件应同时支持Bukkit端和MCDReforged端。*

## 联盟账号
### 绑定 
玩家进入任意服务器时(非正版服为输入密码登录后或注册后)，指引其绑定联盟账号(非强制性)。

#### 指令绑定
玩家在输入`/mpwa bind`指令后，根据所在服务器和玩家id生成16位随机授权码(例: `29b0aX142jL80dOt`)，并根据授权码生成授权链接。
生成授权码后会向网页后端发送授权码所对应的玩家名与来源服务器ID(另见附录-服务器ID)。

### 网页注册
玩家点击链接后网页端要求设置联盟账号ID(如有重名需更换，更换的仅是联盟账号ID，与Minecraft账户名无关)和密码。显示的“玩家名”和“来源服务器”仅为确认信息，用户无法更改；其他输入框均为必填。联盟账号ID是唯一且设置后不可更改的。

### 联盟账号登录
未定。大致功能：在 https://account.mpwa.cn/login 处登录联盟账号，提供修改绑定账号的功能（修改绑定后在该联盟账号名下的原Minecraft账号的通行证一并取消，并转移至新账号）。

### 通行证管理网页
未定。联盟内服务器管理员登录管理员账号后可在网页端撤销/编辑/手动添加通行证，手动撤销玩家在特定服务器的白名单。

### 发送白名单
收到新的玩家注册(绑定)后，将白名单发送给所有接收联盟玩家的服务器的插件端。当用户改绑或管理员撤回通行证后将取消白名单。

### 服务端配置文件
```
# 配置添加白名单的指令
add-whitelist: easywl add %playername
remove-whitelist: easywl remove %playername
```
